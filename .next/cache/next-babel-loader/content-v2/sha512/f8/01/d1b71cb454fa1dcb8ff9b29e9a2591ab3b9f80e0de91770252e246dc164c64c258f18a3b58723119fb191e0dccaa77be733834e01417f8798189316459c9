{"ast":null,"code":"import _regeneratorRuntime from \"/home/test/work/allProjects/node_modules/next/node_modules/@babel/runtime/regenerator\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(workerLoadData2),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(watchLoadData2);\n\nimport { takeEvery, put, call } from \"redux-saga/effects\";\nimport { showLoader, hideLoader } from \"../actions/loadingIndicator\";\nimport { errMessage, putWeatherServerWeatherbit } from \"../actions/serverWeatherbit_saga\";\nimport { LOAD_WEATHER_SERVER_WEATHERBIT } from \"../actions/constants\";\nimport { API_KEY_SERVER_WEATHERBIT } from \"../actions/constantsApi\";\n\nvar fetchData = function fetchData(city, country) {\n  return fetch(\"https://api.weatherbit.io/v2.0/current?&city=\".concat(city, \"&country=\").concat(country.toUpperCase(), \"&key=13779e5118e361b5c9eb287d195b8225\")).then(function (respone) {\n    return respone.json();\n  });\n};\n\nfunction workerLoadData2(_ref) {\n  var city, country, data, _data;\n\n  return _regeneratorRuntime.wrap(function workerLoadData2$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          city = _ref.city, country = _ref.country;\n          _context.prev = 1;\n          _context.next = 4;\n          return put(showLoader());\n\n        case 4:\n          _context.next = 6;\n          return call(fetchData, city, country);\n\n        case 6:\n          data = _context.sent;\n\n          if (!(data.error || data.status > 200 && data.status < 400)) {\n            _context.next = 12;\n            break;\n          }\n\n          _context.next = 10;\n          return put(errMessage(data));\n\n        case 10:\n          _context.next = 14;\n          break;\n\n        case 12:\n          _context.next = 14;\n          return put(putWeatherServerWeatherbit(data));\n\n        case 14:\n          _context.next = 16;\n          return put(hideLoader());\n\n        case 16:\n          _context.next = 26;\n          break;\n\n        case 18:\n          _context.prev = 18;\n          _context.t0 = _context[\"catch\"](1);\n          _data = {\n            error: \"city not found\"\n          };\n          console.log(_data);\n          _context.next = 24;\n          return put(errMessage(_data));\n\n        case 24:\n          _context.next = 26;\n          return put(hideLoader());\n\n        case 26:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[1, 18]]);\n}\n\nexport default function watchLoadData2() {\n  return _regeneratorRuntime.wrap(function watchLoadData2$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return takeEvery(LOAD_WEATHER_SERVER_WEATHERBIT, workerLoadData2);\n\n        case 2:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}","map":{"version":3,"sources":["/home/test/work/allProjects/redux/Weather/generators/saga.js"],"names":["workerLoadData2","watchLoadData2","takeEvery","put","call","showLoader","hideLoader","errMessage","putWeatherServerWeatherbit","LOAD_WEATHER_SERVER_WEATHERBIT","API_KEY_SERVER_WEATHERBIT","fetchData","city","country","fetch","toUpperCase","then","respone","json","data","error","status","console","log"],"mappings":";;oDAeUA,e;qDAoBeC,c;;AAnCzB,SAASC,SAAT,EAAoBC,GAApB,EAAyBC,IAAzB,QAAqC,oBAArC;AACA,SAASC,UAAT,EAAqBC,UAArB,QAAuC,6BAAvC;AACA,SACEC,UADF,EAEEC,0BAFF,QAGO,kCAHP;AAIA,SAASC,8BAAT,QAA+C,sBAA/C;AACA,SAASC,yBAAT,QAA0C,yBAA1C;;AAEA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,IAAD,EAAOC,OAAP,EAAmB;AACnC,SAAOC,KAAK,wDACsCF,IADtC,sBACsDC,OAAO,CAACE,WAAR,EADtD,2CAAL,CAELC,IAFK,CAEA,UAACC,OAAD;AAAA,WAAaA,OAAO,CAACC,IAAR,EAAb;AAAA,GAFA,CAAP;AAGD,CAJD;;AAMA,SAAUlB,eAAV;AAAA;;AAAA;AAAA;AAAA;AAAA;AAA4BY,UAAAA,IAA5B,QAA4BA,IAA5B,EAAkCC,OAAlC,QAAkCA,OAAlC;AAAA;AAAA;AAEI,iBAAMV,GAAG,CAACE,UAAU,EAAX,CAAT;;AAFJ;AAAA;AAGiB,iBAAMD,IAAI,CAACO,SAAD,EAAYC,IAAZ,EAAkBC,OAAlB,CAAV;;AAHjB;AAGUM,UAAAA,IAHV;;AAAA,gBAIQA,IAAI,CAACC,KAAL,IAAeD,IAAI,CAACE,MAAL,GAAc,GAAd,IAAqBF,IAAI,CAACE,MAAL,GAAc,GAJ1D;AAAA;AAAA;AAAA;;AAAA;AAKM,iBAAMlB,GAAG,CAACI,UAAU,CAACY,IAAD,CAAX,CAAT;;AALN;AAAA;AAAA;;AAAA;AAAA;AAOM,iBAAMhB,GAAG,CAACK,0BAA0B,CAACW,IAAD,CAA3B,CAAT;;AAPN;AAAA;AASI,iBAAMhB,GAAG,CAACG,UAAU,EAAX,CAAT;;AATJ;AAAA;AAAA;;AAAA;AAAA;AAAA;AAWUa,UAAAA,KAXV,GAWiB;AACXC,YAAAA,KAAK,EAAE;AADI,WAXjB;AAcIE,UAAAA,OAAO,CAACC,GAAR,CAAYJ,KAAZ;AAdJ;AAeI,iBAAMhB,GAAG,CAACI,UAAU,CAACY,KAAD,CAAX,CAAT;;AAfJ;AAAA;AAgBI,iBAAMhB,GAAG,CAACG,UAAU,EAAX,CAAT;;AAhBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAoBA,eAAe,SAAUL,cAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACb,iBAAMC,SAAS,CAACO,8BAAD,EAAiCT,eAAjC,CAAf;;AADa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { takeEvery, put, call } from \"redux-saga/effects\";\nimport { showLoader, hideLoader } from \"../actions/loadingIndicator\";\nimport {\n  errMessage,\n  putWeatherServerWeatherbit,\n} from \"../actions/serverWeatherbit_saga\";\nimport { LOAD_WEATHER_SERVER_WEATHERBIT } from \"../actions/constants\";\nimport { API_KEY_SERVER_WEATHERBIT } from \"../actions/constantsApi\";\n\nconst fetchData = (city, country) => {\n  return fetch(\n    `https://api.weatherbit.io/v2.0/current?&city=${city}&country=${country.toUpperCase()}&key=13779e5118e361b5c9eb287d195b8225`\n  ).then((respone) => respone.json());\n};\n\nfunction* workerLoadData2({ city, country }) {\n  try {\n    yield put(showLoader());\n    const data = yield call(fetchData, city, country);\n    if (data.error || (data.status > 200 && data.status < 400)) {\n      yield put(errMessage(data));\n    } else {\n      yield put(putWeatherServerWeatherbit(data));\n    }\n    yield put(hideLoader());\n  } catch (err) {\n    const data = {\n      error: \"city not found\",\n    };\n    console.log(data);\n    yield put(errMessage(data));\n    yield put(hideLoader());\n  }\n}\n\nexport default function* watchLoadData2() {\n  yield takeEvery(LOAD_WEATHER_SERVER_WEATHERBIT, workerLoadData2);\n}"]},"metadata":{},"sourceType":"module"}